# vim:et:ts=2:sw=2:ft=yaml

message-bus:
  # Connecting to OpenSRF.
  #
  # Standalone OpenSRF clients only require a subset of the message-bus: 
  # config.

  # List of all routable domains in our cluster.
  #
  # If a Domain has a "hosted-services" entry, those are the only services
  # that will launch themselves on the domain AND the only services which
  # are permitted to register with the router running on the domain.  
  # If no hosted-services entry exists, all services are permitted to run
  # on the domain / register with the domain's router.
  domains:
    - name: private.localhost
      port: 5222
    - name: public.localhost
      port: 5222
      hosted-services: public-services

  # Credentials used for logging in to the message bus.
  #
  # Credential names (e.g. "opensrf") are free-form and have no meaning
  # outside of their use in this file.
  credentials:
    opensrf:
      username: opensrf
      password: password
    router:
      username: router
      password: password

  # Well-known connection types, with option to define custom types
  # for use with local scripts, etc.
  #
  # These link connection types to their bus credentials and define
  # their logging configs.
  connections:
    service:
      credentials: opensrf
      logfile: syslog
      loglevel: debug
      syslog-facility: local0
      actlog-facility: local1
    gateway:
      credentials: opensrf
      logfile: syslog
      loglevel: info
      syslog-facility: local6
      actlog-facility: local1
      generate-xid: true
    srfsh:
      credentials: opensrf
      logfile: /openils/var/log/srfsh.log
      loglevel: debug
      generate-xid: true
    router:
      credentials: router
      logfile: syslog
      loglevel: trace
      syslog-facility: local2

# Named groups of services.
# Names are free-form and have no meaning outside of this configuration file.
service-groups:
  public-services:
    - opensrf.math
    - open-ils.actor
    - open-ils.acq
    - open-ils.auth
    - open-ils.auth_proxy
    - open-ils.booking
    - open-ils.cat
    - open-ils.circ
    - open-ils.collections
    - open-ils.courses
    - open-ils.curbside
    - open-ils.ebook_api
    - open-ils.fielder
    - open-ils.pcrud
    - open-ils.permacrud
    - open-ils.reporter
    - open-ils.resolver
    - open-ils.search
    - open-ils.serial
    - open-ils.supercat
    - open-ils.url_verify
    - open-ils.vandelay
    - opensrf.rs-public

# Avoid logging parameters for API calls -- at or above INFO level --
# whose API name is a left-anchored match to any of the following method
# names.
log-protect:
  - open-ils.auth.authenticate.verify
  - open-ils.auth.authenticate.complete
  - open-ils.auth.login
  - open-ils.auth_proxy.login
  - open-ils.actor.patron.password_reset.commit
  - open-ils.actor.user.password
  - open-ils.actor.user.username
  - open-ils.actor.user.email
  - open-ils.actor.patron.update
  - open-ils.cstore.direct.actor.user.create
  - open-ils.cstore.direct.actor.user.update
  - open-ils.cstore.direct.actor.user.delete
  - open-ils.search.z3950.apply_credentials
  - open-ils.geo
  - open-ils.actor.geo

